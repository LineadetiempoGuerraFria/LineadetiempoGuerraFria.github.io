<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üïäÔ∏è‚öîÔ∏è‚ò≠ L√çNEA DE TIEMPO: GUERRA FR√çA ü¶Öüåé</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');

:root{
  --bg:#020617;
  --card:#0f172a;
  --muted:#94a3b8;
  --accent:#f87171;
}

body{
  font-family:'Share Tech Mono', monospace;
  background:var(--bg);
  color:#cbd5e1;
  margin:0;
  padding:2rem;
}

header { text-align:center; margin-bottom:1rem; position:relative; }
header h1{
  color:var(--accent);
  font-size:3.8rem;
  line-height:1.02;
  margin:0 0 .25rem 0;
  letter-spacing:0.5px;
}
header p { color:var(--muted); margin:0; }

/* üéµ NUEVO: bot√≥n de m√∫sica */
.music-control {
  position:absolute;
  top:-50;
  right:0;
  background:var(--card);
  border:1px solid rgba(255,255,255,0.05);
  color:var(--accent);
  padding:.4rem .8rem;
  border-radius:.5rem;
  cursor:pointer;
  font-weight:700;
  transition:all .2s ease;
}
.music-control:hover {
  background:var(--accent);
  color:white;
}

main#timeline-container{
  position:relative;
  max-width:1100px;
  margin: 1.5rem auto;
  padding: 1rem 0;
}

.timeline-line{
  position:absolute;
  left:50%;
  top:0;
  bottom:0;
  width:4px;
  background:var(--accent);
  transform:translateX(-50%);
  z-index:5;
}

.timeline-item{
  position:relative;
  display:flex;
  align-items:center;
  margin:1.5rem 0;
  min-height:90px;
}

.timeline-content{
  width:45%;
  background:var(--card);
  border-radius:.75rem;
  padding:1rem;
  border:1px solid rgba(255,255,255,0.04);
  box-shadow:0 8px 24px rgba(2,6,23,0.6);
  z-index:10;
  transition:transform .16s ease;
  cursor:pointer;
}
.timeline-content:hover{ transform:translateY(-4px); }

.timeline-dot{
  position:absolute;
  left:50%;
  transform:translate(-50%,0);
  width:48px;
  height:48px;
  border-radius:999px;
  background:#0b1220;
  border:4px solid var(--accent);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:20;
  cursor:pointer;
  font-size:1.1rem;
}

.item-left .timeline-content{ order:1; text-align:right; margin-right: calc(50% + 1.25rem); }
.item-right .timeline-content{ order:2; text-align:left; margin-left: calc(50% + 1.25rem); }

.event-title{ color:var(--accent); font-weight:700; font-size:1.05rem; margin-bottom:.25rem; display:flex; align-items:center; gap:.5rem; justify-content:flex-start; }
.event-year{ color:var(--muted); font-size:.9rem; }

@media (max-width:768px){
  .timeline-line{ left:28px; transform:none; }
  .timeline-dot{ left:28px; transform:none; }
  .timeline-content{ width:calc(100% - 96px); margin-left:72px !important; text-align:left !important; }
  .item-left .timeline-content, .item-right .timeline-content { order:1; margin-left:72px !important; margin-right:0 !important; }
}

/* Modal */
#event-modal{ display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); align-items:center; justify-content:center; z-index:60; padding:1rem; }
#event-modal.open{ display:flex; }
.modal-panel{
  width:100%; max-width:880px;
  background:var(--card);
  border-radius:0.75rem;
  padding:1.25rem;
  border:2px solid rgba(248,113,113,0.12);
  color:#e6eef5;
  box-shadow:0 12px 36px rgba(2,6,23,0.7);
  overflow:auto;
  max-height:90vh;
  -webkit-overflow-scrolling: touch;
}
.modal-top{ display:flex; justify-content:space-between; align-items:flex-start; gap:1rem; }
.modal-title{ color:var(--accent); font-size:1.4rem; font-weight:700; margin-bottom:.25rem; display:flex; gap:.6rem; align-items:center; }
.modal-year{ color:var(--muted); margin-bottom:.5rem; }
.modal-body{ color:#cbd5e1; line-height:1.45; margin-bottom:0.75rem; white-space:pre-wrap; }
.video-placeholder { color:var(--muted); font-style:italic; margin-bottom:.6rem; text-align:center; }

.modal-video iframe{ width:100%; height:420px; border:0; }
@media (max-width:768px){
  .modal-video iframe{ height:220px; }
}

.trivia-box{ background:#0b1220; border:1px solid rgba(255,255,255,0.03); padding:.75rem; border-radius:.5rem; margin-top:.6rem; }
.btn {
  background:var(--accent); color:white; padding:.5rem .9rem; border-radius:.5rem; cursor:pointer; border:none; font-weight:700;
}
.btn:hover{ background:#ef4444; }

.loader{ border:4px solid rgba(255,255,255,0.12); border-top:4px solid var(--accent); border-radius:50%; width:28px; height:28px; animation:spin 1s linear infinite; margin:0.5rem auto; }
@keyframes spin{ to{ transform:rotate(360deg) } }

footer { text-align:center; color:var(--muted); margin-top:2rem; font-size:0.9rem; }
</style>
</head>
<body>

<header>
  <h1>üïäÔ∏è‚öîÔ∏è‚ò≠ L√çNEA DE TIEMPO: GUERRA FR√çA ü¶Öüåé</h1>

  <!-- üéµ NUEVO: Control de m√∫sica -->
  <button id="musicToggle" class="music-control">üîä M√∫sica</button>
</header>

<!-- üéµ NUEVO: Elemento de audio oculto -->
<audio id="bgMusic" loop autoplay>
  <!-- Puedes cambiar esta URL por tu propia m√∫sica -->
  <source src="/Gustavo Dudamel_ Danz√≥n N2 (Orquesta Sinf√≥nica Sim√≥n Bol√≠var)  Lucerne Festival (27).mp3" type="audio/mpeg">
</audio>

<main id="timeline-container">
  <div class="timeline-line"></div>
</main>

<!-- MODAL -->
<div id="event-modal" onclick="closeModal()">
  <div class="modal-panel" onclick="event.stopPropagation()">
    <div class="modal-top">
      <div style="flex:1 1 auto; min-width:0">
        <div id="modal-title" class="modal-title"></div>
        <div id="modal-year" class="modal-year"></div>
        <div id="modal-body" class="modal-body"></div>
      </div>
      <div style="margin-left:12px; text-align:right">
        <button class="btn" onclick="closeModal()">Cerrar ‚úï</button>
      </div>
    </div>

    <div id="modal-video-root" class="modal-video" style="margin-top:.9rem;">
      <p class="video-placeholder">üé• Aqu√≠ ir√° el video o enlace correspondiente al evento</p>
    </div>

    <div class="trivia-box" id="trivia-box">
      <button id="trivia-button" class="btn">Ponte a prueba</button>
      <div id="trivia-area" style="margin-top:.6rem;"></div>
    </div>
  </div>
</div>

<script>
// --- üéµ NUEVO: control de m√∫sica ---
const bgMusic = document.getElementById('bgMusic');
const musicToggle = document.getElementById('musicToggle');

bgMusic.volume = 0.6; // volumen inicial (ajusta si quieres)
let isPlaying = !bgMusic.paused && !bgMusic.ended;
let isMuted = bgMusic.muted || false;

// inicializar texto del bot√≥n seg√∫n estado
musicToggle.textContent = isMuted ? 'üîà Silenciado' : (isPlaying ? 'üîä M√∫sica' : 'üîá');

musicToggle.addEventListener('click', () => {
  if (bgMusic.paused) {
    bgMusic.play().catch(()=>{}); // evitar error por autoplay
    musicToggle.textContent = 'üîä M√∫sica';
    isPlaying = true;
  } else {
    bgMusic.pause();
    musicToggle.textContent = 'üîá';
    isPlaying = false;
  }
});

// opci√≥n para silenciar con doble clic (evita listeners duplicados)
musicToggle.addEventListener('dblclick', () => {
  isMuted = !isMuted;
  bgMusic.muted = isMuted;
  musicToggle.textContent = isMuted ? 'üîà Silenciado' : (isPlaying ? 'üîä M√∫sica' : 'üîá');
});

// üîä Asegurar reproducci√≥n autom√°tica (seg√∫n navegador)


const events = [
  {id:1, year:"1945", title:"Fin de la Segunda Guerra Mundial", description:"Tras la rendici√≥n de Alemania y Jap√≥n, el mundo qued√≥ dominado por dos grandes potencias: Estados Unidos y la Uni√≥n Sovi√©tica. Las diferencias pol√≠ticas y econ√≥micas entre ambos comenzaron a dibujar las zonas de influencia que dar√≠an paso al periodo llamado Guerra Fr√≠a.", videoUrl:"https://www.youtube.com/watch?v=I3DaaXP0VDA?si=xatJKBsY-fchsPVy", icon:"üåç"},
  {id:2, year:"1947", title:"Inicio de la Guerra Fr√≠a: Doctrina Truman", description:"En 1947 las tensiones se consolidaron: doctrinas, ayudas econ√≥micas y enfrentamientos indirectos marcaron la confrontaci√≥n entre los bloques liderados por EE. UU. y la URSS. Ese mismo a√±o, el presidente Harry S. Truman proclam√≥ la Doctrina Truman, una pol√≠tica destinada a contener la expansi√≥n del comunismo mediante el apoyo econ√≥mico y militar a los pa√≠ses amenazados por la influencia sovi√©tica.", videoUrl:"https://www.youtube.com/watch?v=ZHCH4DD5V2s?si=HqUeMKS3KEbobWLM", icon:"‚öîÔ∏è"},
  {id:3, year:"1948", title:"Plan Marshall", description:"El Plan Marshall fue la gran iniciativa estadounidense para reconstruir Europa Occidental tras la guerra mediante ayuda econ√≥mica. Adem√°s de levantar econom√≠as devastadas, buscaba consolidar gobiernos prooccidentales y frenar la expansi√≥n comunista en la regi√≥n.", videoUrl:"https://www.youtube.com/watch?v=GAXkXoNv3UY?si=9QVLu_afRCBPXpBi", icon:"üí∞"},
  {id:4, year:"1949", title:"Formaci√≥n de la OTAN", description:"La creaci√≥n de la OTAN constituy√≥ una alianza militar defensiva entre Estados Unidos, Canad√° y naciones de Europa Occidental. Su prop√≥sito central: defensa colectiva frente a agresiones y consolidaci√≥n de un frente com√∫n ante el bloque sovi√©tico.", videoUrl:"https://www.youtube.com/watch?v=aF_cBDCw6-s?si=3PpDXAAs-EuNRGbX", icon:"üõ°Ô∏è"},
  {id:5, year:"1950-1953", title:"Guerra de Corea", description:"El conflicto en la pen√≠nsula coreana enfrent√≥ al Norte (apoyado por la URSS y China) contra el Sur (apoyado por EE.‚ÄâUU. y fuerzas de la ONU). Finaliz√≥ en un armisticio que dej√≥ la pen√≠nsula dividida, consolidando la confrontaci√≥n regional dentro del contexto global de la Guerra Fr√≠a.", videoUrl:"https://www.youtube.com/watch?v=1wve7tGKI78?si=WBppRN0oWF0uDgPc", icon:"ü™ñ"},
  {id:6, year:"1955", title:"Pacto de Varsovia", description:"Como respuesta a la OTAN, la Uni√≥n Sovi√©tica y sus estados sat√©lites formalizaron el Pacto de Varsovia. Fue la contraparte militar del bloque oriental y consolid√≥ la divisi√≥n pol√≠tico-militar de Europa en dos alianzas enfrentadas.", videoUrl:"https://www.youtube.com/watch?v=S-kATUPlaMs?si=c2KEOau0WJiBJbGg", icon:"‚öíÔ∏è"},
  {id:7, year:"1955-1975", title:"Guerra de Vietnam", description:"Un conflicto prolongado que enfrent√≥ al gobierno de Vietnam del Sur (apoyado por EE.‚ÄâUU.) y al Viet Cong y Vietnam del Norte (con apoyo comunista). Fue un ejemplo de guerra por poder en la Guerra Fr√≠a, con grandes consecuencias humanas y pol√≠ticas.", videoUrl:"https://www.youtube.com/watch?v=BF0zfeFgRZ0?si=HNAa_18Z33ORO1fz", icon:"üåø"},
  {id:8, year:"1962", title:"Crisis de los Misiles en Cuba", description:"El descubrimiento de misiles sovi√©ticos emplazados en Cuba provoc√≥ una confrontaci√≥n directa entre EE.‚ÄâUU. y la URSS que dur√≥ 13 d√≠as. La crisis termin√≥ con un acuerdo de retirada de misiles y ense√±√≥ la necesidad de canales de comunicaci√≥n para evitar un conflicto nuclear.", videoUrl:"https://www.youtube.com/watch?v=_3aQ5DDAujA?si=2wwJEk570VoPI_n6", icon:"‚ò¢Ô∏è"},
  {id:9, year:"1969", title:"Carrera Espacial", description:"La competencia cient√≠fica y tecnol√≥gica incluy√≥ la carrera espacial. El hito m√°s conocido fue la llegada del ser humano a la Luna (Apolo 11), un triunfo propagand√≠stico y t√©cnico para Estados Unidos dentro de la rivalidad con la URSS.", videoUrl:"https://www.youtube.com/watch?v=MhPs5kRjqq4?si=1BYkK3x8QFM4nSZ7", icon:"üöÄ"},
  {id:10, year:"1979-1989", title:"Invasi√≥n Sovi√©tica de Afganist√°n", description:"La intervenci√≥n sovi√©tica en Afganist√°n se convirti√≥ en un costoso conflicto de desgaste. Apoyos externos, guerrillas y la prolongaci√≥n del combate contribuyeron al debilitamiento econ√≥mico y pol√≠tico de la URSS.", videoUrl:"https://www.youtube.com/watch?v=PwVp2K2Hgww?si=RWyaXOqWgJUCvf", icon:"‚õ∞"},
  {id:11, year:"1989", title:"Ca√≠da del Muro de Berl√≠n", description:"La apertura de fronteras y la presi√≥n popular derivaron en la ca√≠da del Muro de Berl√≠n, s√≠mbolo de la divisi√≥n europea. Este suceso marc√≥ el principio del colapso de los reg√≠menes comunistas en Europa del Este.", videoUrl:"https://www.youtube.com/watch?v=sQxT-oKkuko?si=Z-IGVe0iQOA2-AxI", icon:"üß±"},
  {id:12, year:"1991", title:"Fin de la Guerra Fr√≠a / Disoluci√≥n de la URSS", description:"La fragmentaci√≥n de la Uni√≥n Sovi√©tica en rep√∫blicas independientes, junto a las crisis econ√≥micas y pol√≠ticas internas, supuso el fin del enfrentamiento bipolar y la consolidaci√≥n de un nuevo orden internacional.", videoUrl:"https://www.youtube.com/watch?v=wJS0enz-uCI?si=vngSTrdV1M4O6Dke", icon:"üïäÔ∏è"}
];


const localTriviaBank = {
  "1945":["¬øQu√© dos grandes potencias emergieron tras la Segunda Guerra Mundial?","Estados Unidos y la Uni√≥n Sovi√©tica."],
  "1947":["¬øQu√© marc√≥ el inicio formal de la confrontaci√≥n entre bloques en 1947?","La consolidaci√≥n de doctrinas y pol√≠ticas de contenci√≥n entre EE. UU. y la URSS."],
  "1948":["¬øCu√°l era el prop√≥sito principal del Plan Marshall?","Reconstruir Europa Occidental y frenar la expansi√≥n comunista."],
  "1949":["¬øQu√© buscaba la creaci√≥n de la OTAN?","Defensa colectiva entre pa√≠ses occidentales."],
  "1955":["¬øQu√© represent√≥ el Pacto de Varsovia?","La alianza militar del bloque oriental como respuesta a la OTAN."],
  "1950-1953":["¬øQu√© dej√≥ la Guerra de Corea?","Un armisticio y la divisi√≥n permanente de la pen√≠nsula."],
  "1955-1975":["¬øQu√© caracter√≠stica defini√≥ a la Guerra de Vietnam?","Fue una guerra por poder entre bloques ideol√≥gicos con gran coste humano."],
  "1962":["¬øQu√© ense√±√≥ la Crisis de los Misiles en Cuba?","La importancia de canales directos de comunicaci√≥n para evitar la escalada nuclear."],
  "1979-1989":["¬øQu√© efecto tuvo la intervenci√≥n en Afganist√°n sobre la URSS?","Contribuy√≥ a su desgaste pol√≠tico y econ√≥mico."],
  "1969":["¬øQu√© simboliz√≥ la llegada del hombre a la Luna?","Un triunfo tecnol√≥gico y propagand√≠stico en la competencia entre bloques."],
  "1989":["¬øPor qu√© es simb√≥lica la ca√≠da del Muro de Berl√≠n?","Porque represent√≥ el fin de la divisi√≥n entre Este y Oeste en Europa."],
  "1991":["¬øQu√© implic√≥ la disoluci√≥n de la URSS?","El final oficial de la Guerra Fr√≠a y un reordenamiento pol√≠tico internacional."]
};

// --- resto del script (igual que antes) ---
const modal = document.getElementById('event-modal');
const modalTitle = document.getElementById('modal-title');
const modalYear = document.getElementById('modal-year');
const modalBody = document.getElementById('modal-body');
const modalVideoRoot = document.getElementById('modal-video-root');
const triviaArea = document.getElementById('trivia-area');
const triviaButton = document.getElementById('trivia-button');

triviaButton.addEventListener('click', generateTrivia);
triviaButton.addEventListener('touchstart', generateTrivia);

function toYouTubeEmbed(url){
  if(!url) return null;
  try{
    const u = new URL(url);
    if(u.hostname.includes('youtu.be')) return 'https://www.youtube.com/embed/' + u.pathname.slice(1) + (u.searchParams.get('si') ? '?si=' + encodeURIComponent(u.searchParams.get('si')) : '');
    if(u.searchParams.get('v')) return 'https://www.youtube.com/embed/' + u.searchParams.get('v') + (u.searchParams.get('si') ? '?si=' + encodeURIComponent(u.searchParams.get('si')) : '');
    return null;
  }catch(e){ return null; }
}

function createTimelineItem(ev, idx){
  const isLeft = idx%2===0;
  const wrapper = document.createElement('div');
  wrapper.className='timeline-item ' + (isLeft ? 'item-left' : 'item-right');

  const content = document.createElement('div');
  content.className='timeline-content';
  content.innerHTML=`<div class="event-title"><span style="font-size:1.1rem">${ev.icon}</span><span style="margin-left:.35rem">${ev.title}</span></div><div class="event-year">${ev.year}</div>`;
  content.onclick = ()=>openModal(ev);

  const dot = document.createElement('div');
  dot.className='timeline-dot';
  dot.textContent=ev.icon||'‚ö™';
  dot.onclick = ()=>openModal(ev);

  wrapper.appendChild(content);
  wrapper.appendChild(dot);
  return wrapper;
}

function renderTimeline(){
  const container=document.getElementById('timeline-container');
  events.forEach((ev,idx)=>container.appendChild(createTimelineItem(ev,idx)));
}

function openModal(ev){
  modalTitle.textContent=ev.title;
  modalYear.textContent='A√±o: '+ev.year;
  modalBody.textContent=ev.description;

  modalVideoRoot.innerHTML='';
  const embed = toYouTubeEmbed(ev.videoUrl);
  if(embed){
    const iframe=document.createElement('iframe');
    iframe.width='100%';
    iframe.height=window.innerWidth<768?220:420; // altura adaptativa
    iframe.src=embed;
    iframe.allow='accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture';
    iframe.allowFullscreen=true;
    iframe.style.border='0';
    modalVideoRoot.appendChild(iframe);
  } else {
    const placeholder=document.createElement('p');
    placeholder.className='video-placeholder';
    placeholder.textContent='üé• Aqu√≠ ir√° el video o enlace correspondiente al evento';
    modalVideoRoot.appendChild(placeholder);
  }

  triviaArea.innerHTML='';
  modal.classList.add('open');
}

function closeModal(){ 
  modal.classList.remove('open'); 
  modalVideoRoot.innerHTML = ''; 
}

async function generateTrivia(){
  triviaArea.innerHTML='<div class="loader"></div><p style="text-align:center; color:var(--muted); margin-top:.5rem;">Generando pregunta...</p>';
  const yearKey = modalYear.textContent.replace('A√±o: ','').trim();
  const eventTitle = modalTitle.textContent.trim();
  const eventDesc = modalBody.textContent.trim();
  await new Promise(r=>setTimeout(r,400));
  const pair = localTriviaBank[yearKey] || [`Reflexiona sobre: ${eventTitle}`,''];
  triviaArea.innerHTML=`
    <p style="color:var(--accent); font-weight:700; margin-bottom:6px">Pregunta:</p>
    <p style="color:#e6eef5; margin-bottom:8px">${pair[0]}</p>
    <button class="btn" id="show-answer-btn">Respuesta</button>
    <p id="trivia-answer" style="color:#7ee787; font-weight:700; margin-top:8px; display:none;"></p>
  `;
  document.getElementById('show-answer-btn').onclick=()=>{
    const ansEl=document.getElementById('trivia-answer');
    ansEl.textContent='RESPUESTA: '+pair[1];
    ansEl.style.display='block';
    document.getElementById('show-answer-btn').style.display='none';
  };
}

window.addEventListener('load', renderTimeline);
window.addEventListener('keydown',(e)=>{ if(e.key==='Escape') closeModal(); });

</script>

</body>
</html>

